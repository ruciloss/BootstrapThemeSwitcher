/*!
 * Bootstrap Theme Toggler
 *
 * You can easily switch between light and dark modes.
 * The theme can be set automatically based on the system's preference and will remember the user's choice.
 * Using Bootstrap's dropdown menu, users can select their preferred theme, and Bootstrap Icons can be included for an enhanced visual experience.
 *
 * @author Ruciloss
 * @version 1.0.0
 * @license MIT
 * @see {@link https://ruciloss.github.io}
 *
 * @requires Bootstrap 5.2 or later
 * Build date: 2/2/2025, 7:44:00 PM
 */var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{A:()=>i});class i{static t=(()=>"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)();static i="useTheme";static h=this.l();static u={root:"body",prepend:!1,i18n:{default:"en",autoDetect:!1,translations:{en:{system:"System",light:"Light",dark:"Dark"}}},classes:{container:"",button:"",menu:""},storage:{type:"local",expiration:null}};static m(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s="[Bootstrap Theme Toggler v1.1.1]";this.t&&(i?console.error(`${s} ${t}`,e||""):console.log(`${s} ${t}`,void 0!==e?e:" "))}static l(){try{return`_${([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}`}catch(t){return this.m("Failed to generate UUID",t,!0),""}}static p(t,e){try{const i="session"===this.u.storage.type?sessionStorage:localStorage;let s={value:e,timestamp:this.u.storage.expiration?Date.now():null};s=JSON.stringify(s),i.setItem(t,s)}catch(t){this.m("Error while storing value in storage",t,!0)}}static $(t){try{const e="session"===this.u.storage.type?sessionStorage:localStorage,i=this.u.storage.expiration;let s=e.getItem(t);return s?(s=JSON.parse(s),i&&Date.now()-s.timestamp>i?(e.removeItem(t),this.m(`Item ${t} has expired.`),null):s.value):null}catch(t){return this.m("Error retrieving value from storage",t,!0),null}}static v(t){try{const e=document.createElement(t);return"button"===t&&e.setAttribute("type","button"),e}catch(t){return this.m("Failed to create HTML element",t,!0),null}}static S(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const n=this.v("li"),o=this.v("a");return i&&(n.className=i.trim()),o.className=s.trim(),o.href="#!",o.setAttribute("data-value",t),o.append(e),n.appendChild(o),n}static k(t){try{if(this.m("Creating element.."),this._=this.l(),this.m(`Generated ID: ${this._}`),t.querySelector(`#${this.h}`))return void this.m("Element already exists in the root. Skipping creation..");const e=this.v("div"),i=`dropdown ${this.u.classes.container||""}`.trim();e.className=i,e.id=this.h,this.u.classes.container&&this.m(`Added custom class: '${this.u.classes.container}' to the dropdown container.`);const s=this.v("button"),n=`dropdown-toggle btn border-0 ${this.u.classes.button||""}`.trim();s.className=n,s.setAttribute("data-bs-toggle","dropdown"),s.setAttribute("aria-expanded","false"),this.u.classes.button&&this.m(`Added custom class: '${this.u.classes.button}' to the button.`);const o=this.v("i");o.className="bi bi-circle-half",s.appendChild(o),s.append(" "+(this.u.i18n.system||"System"));const a=this.v("ul"),r=`dropdown-menu ${this.u.classes.menu||""}`.trim();a.className=r,this.u.classes.menu&&this.m(`Added custom class: '${this.u.classes.menu}' to the dropdown menu.`),a.appendChild(this.S("system",this.u.i18n.system||"System","","dropdown-item")),a.appendChild(this.S("light",this.u.i18n.light||"Light","","dropdown-item")),a.appendChild(this.S("dark",this.u.i18n.dark||"Dark","","dropdown-item")),e.appendChild(s),e.appendChild(a),this.u.prepend?(t.insertAdjacentElement("afterbegin",e),this.m("Prepended element to the root.")):(t.appendChild(e),this.m("Appended element to the root."));const h=document.createComment("BootstrapThemeToggler v1.1.1 | https://jindrichrucil.github.io");t.insertBefore(h,t.firstChild)}catch(t){this.m("Error creating dropdown element",t,!0)}}static D(t,e,i,s){try{document.documentElement.setAttribute("data-bs-theme",e);const n=document.getElementById(this.h);if(!n)throw new Error("Element with the specified ID not found.");const o=n.querySelector(".dropdown-toggle");if(!o)throw new Error("Dropdown toggle button not found.");o.innerHTML=`<i class="${i}"></i> ${s}`,this.m(`Theme ${e} applied.`),this.p(this.i,t)}catch(t){this.m("Failed to apply theme settings",t,!0)}}static L(t){try{this.m(`Updating theme to: ${t}`);const e=document.getElementById(this.h);if(!e)return void this.m(`Element with ID #${this.h} not found.`,null,!0);e.querySelectorAll(".dropdown-menu li a").forEach((t=>t.classList.remove("active")));const i=e.querySelector(`.dropdown-menu li a[data-value="${t}"]`);if(!i)return void this.m(`Theme option not found for: ${t}`,null,!0);switch(i.classList.add("active"),t){case"system":window.matchMedia("(prefers-color-scheme: dark)").matches?(this.m("Detected system preference: dark"),this.D("system","dark","bi bi-circle-half",this.u.i18n.translations.system||"System")):(this.m("Detected system preference: light"),this.D("system","light","bi bi-circle-half",this.u.i18n.translations.system||"System"));break;case"light":this.D("light","light","bi bi-brightness-high-fill",this.u.i18n.translations.light||"Light");break;case"dark":this.D("dark","dark","bi bi-moon-fill",this.u.i18n.translations.dark||"Dark");break;default:this.m(`Unknown theme: ${t}`,null,!0)}}catch(t){this.m("Error updating theme",t,!0)}}static async T(t){try{this.m(`Loading translations for language: ${t}`);const e=this.u.i18n.translations;if("string"==typeof e[t]){const i=await fetch(e[t]);if(i.ok){const e=await i.json();return this.m(`Translations loaded successfully for language: ${t}`),e}this.m(`Failed to load translations from ${e[t]}`,null,!0)}return e[t]?(this.m(`Translations found in config for language: ${t}`),e[t]):(this.m(`No translations found for language: ${t}. Using default config.`),e[this.u.i18n.default]||{})}catch(t){return this.m("Error loading translations",t,!0),this.u.i18n.translations[this.u.i18n.default]||{}}}static I(){try{const{autoDetect:t,default:e}=this.u.i18n;let i=e;return"browser"===t?(i=navigator.language.split("-")[0]||e,this.m(`Detected language from browser: ${i}`)):"document"===t?(i=document.documentElement.lang||e,this.m(`Detected language from document: ${i}`)):this.m(`Language auto-detection is disabled. Used default language: ${e}`),i}catch(t){return this.m("Failed to detect language",t,!0),this.u.i18n.default}}static async setLanguage(t){try{this.m(`Setting language to: ${t}`);const e=await this.T(t);this.u.i18n.translations=e;const i=document.getElementById(this.h);if(i){i.querySelectorAll(".dropdown-menu li a").forEach((t=>{const i=t.getAttribute("data-value");"system"===i?t.textContent=e.system||"System":"light"===i?t.textContent=e.light||"Light":"dark"===i&&(t.textContent=e.dark||"Dark")}));const t=i.querySelector(".dropdown-toggle");t&&(t.innerHTML=`<i class="${t.querySelector("i").className}"></i> ${e.system||"System"}`)}this.m(`Language updated to: ${t}`)}catch(t){this.m("Error setting language",t,!0)}}static async run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let e;this.u={...this.u,...t},this.m("Initializing.."),e="string"==typeof this.u.root?document.querySelector(this.u.root):this.u.root instanceof HTMLElement?this.u.root:document.body,e||(this.m("Root element not found. Falling back to body.",null,!0),e=document.body),this.k(e);const i=this.I(),s=await this.T(i);this.u.i18n={...this.u.i18n,translations:s};let n=this.$(this.i);null===n?(n="system",this.p(this.i,"system"),this.m("No saved theme found. Defaulting to: system")):this.m(`Saved theme found: ${n}`),this.L(n),document.body.addEventListener("click",(t=>{if(t.target.matches(`#${this.h} .dropdown-menu li a`)){const e=t.target.getAttribute("data-value");this.L(e)}})),this.m("Initialized!")}catch(t){this.m("Error during initialization",t,!0)}}}var s=e.A;export{s as default};